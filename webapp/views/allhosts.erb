<% if @allhosts then %>
    <div class="row">
    <% @allhosts.each_with_index do |host, index| %>
            <div class="span4 well"<%= host.pool.each do |p|
                case p.health
                when :degraded
                    ' style="background-color: #777700"'
                    break
                when :faulted
                    ' style="background-color: #AA1111"'
                    break
                end %>
                <% if host.lastupdate < (DateTime.now - (60 * 60 * 24)) then %>
                        <div class="alert-info">
                            <strong>Warning:</strong> This host has not checked in recently.
                        </div>
                <% end %>
                <h2><a href="/<%= host.hostname %>"><%= host.hostname %></a></h2>
                <p><%= host.hostdescription %></p>
                <ul>
                    <li><a href="/<%= host.hostname %>/pools">Pools</a>: <%= host.pools.count %></li>
                    <li><a href="/<%= host.hostname %>/datasets">Datasets</a>: <%= host.datasets.count %></li>
                </ul>
            </div>
        <% if ((index+1) % 2 == 0) && (index > 0) %>
            </div><div class="row">
        <% end %>
    <% end %>
    </div>
    
<% else %>

    <div class="row">
        <div class="span8">
            <p>No active hosts were found.</p>
        </div>
    </div>
    
<% end %>
